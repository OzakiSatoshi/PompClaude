# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要

PompClaudeは、公共水道ポンプの異常検出システムのPoC（概念実証）開発プロジェクトです。点群データを用いてポンプの変形を検出し、視覚的に表示するWebアプリケーションです。PoCはコスト削減のためDocker上で稼働し、クラウド環境への移行は本番以降を想定しています。

### 主要機能
- 撮影日の異なる同じポンプの点群データ2つの比較
- 変形量の多い箇所を赤色で強調表示
- 具体的な変形量をテキスト形式で表示
- 変形量を視覚的に示すカラーバーの提供
- LAS/LAZファイルのWeb UIからのアップロード
- 3Dビューアによる点群データの表示

## プロジェクトステータス

- **リポジトリ**: https://github.com/OzakiSatoshi/PompClaude.git
- **ブランチ**: master（デフォルトブランチ）
- **プラットフォーム**: Windows (win32)、Git CRLF対応済み
- **開発段階**: 初期段階（技術スタック未確定）

## 技術要件

### 承認基準
- 視覚的に判別できる精度での変形検出が重要
- わずかな変形でも視覚的に判別可能な精度

### セキュリティ要件
- ポンプデータの流出防止
- Docker環境での一時的なデータ保存（本番以降はクラウド移行予定）
- 点群データのダウンロード禁止
- アクセス権限管理された特定URLでのWeb公開

### パフォーマンス要件
- 点群データの読み込みから比較結果の表示まで10秒以内の処理完了
- バックエンドAPI応答時間の測定・監視
- Docker環境での効率的な点群データ処理

## 開発指針

### 次のステップ
1. **Docker環境構築**: コンテナ化されたアプリケーション環境の設定
2. **技術スタック選定**: Web開発フレームワーク、3Dビューアライブラリの選択
3. **プロジェクト構造初期化**: src/, tests/, docs/等のディレクトリ作成
4. **ファイルアップロード機能**: LAS/LAZファイル対応
5. **点群データ比較エンジン**: 変形検出アルゴリズム（10秒以内の処理）
6. **3Dビューア実装**: 点群データ表示とカラーバー機能

### 重要な未解決課題
- 「わずかな変形」の具体的な閾値定義（期限: 2025-08-15）
- 3Dビューアの操作性詳細（拡大縮小、回転、パン等）
- Docker環境での一時データ保存方法（コンテナ内ファイルシステム、マウントボリューム等）
- アクセス権限管理方法（IP制限、認証等）
- LiDAR搭載カメラからの点群データ品質基準

## Git ワークフロー

- プライマリブランチ: `master`
- GitHubリポジトリ設定済み
- Windows環境でのGit操作対応